# HTTP反向代理服务器

技术栈：Netty

目标：
- [ ]  处理HTTP请求并根据URL进行转发
- [x]  长连接、心跳检活、熔断机制
- [ ]  性能测试
- [ ]  调优


## 基本结构

客户端 → 网关服务器 → 后端服务器

### 网关服务器GatewayServer

> FrontendPipeline
* 接收来自客户端的HTTP请求，解析其URL，查询路由表，将请求转发到对应的后端服务器

> BackendPipeline
* 处理来自后端的请求
    * 心跳：
        1. 验证心跳数据的正确性 
        2. 解析后端服务器的地址、可接受的url等信息，保存到路由表中
    * 消息：转发到对应的前端连接中

> 路由表
* 记录 后端服务器信息→连接池 的映射 `ChannelMap<BackendServerInfo, ChannelPool>`
* 后端服务器信息包含：服务器的ip与端口、可接受的URL

### 后端服务器

* 启动后连接网关服务器，发送心跳包进行注册，之后在产生空闲事件时也要发送心跳包
